@page "/theadventure/{state}/{adventurerId?}"
@using c5m._2d6Dungeon;

@rendermode InteractiveServer

<PageTitle>Adventure</PageTitle>

@if (State == "new")
{
    <AdventureInit @bind-ParentAdventure="theAdventure" AutoSelectAdventurerId="@autoSelectAdventurerId"></AdventureInit>
}
else
{
    <AdventurePicker @bind-ParentAdventure="theAdventure"></AdventurePicker>
}

@code{
    [Parameter]
    public required string State { get; set; }
    [Parameter]
    public string? AdventurerId { get; set; }
    public Adventure? theAdventure;
    private int? autoSelectAdventurerId;

    protected override void OnInitialized()
    {
        autoSelectAdventurerId = AdventurerId is not null ? int.Parse(AdventurerId) : null;
    }
}
